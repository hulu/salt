description "Salt Minion"

start on (net-device-up
          and local-filesystems
          and runlevel [2345])
stop on runlevel [!2345]

# Hahaha.. ha.. :|
respawn
respawn limit 10 30

pre-start script
  killall salt-minion || exit 0
end script

script
  # Read configuration variable file if it is present
  [ -f /etc/default/$UPSTART_JOB ] && . /etc/default/$UPSTART_JOB

  exec salt-minion
end script
